{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}

<style>
/* Floating Home Button */
.floating-home-btn {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 1050;
    background-color: #0d6efd;
    color: #ffffff;
    padding: 10px 16px;
    border-radius: 30px;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.3s ease-in-out;
}

.floating-home-btn:hover {
    background-color: #0b5ed7;
    color: #ffffff;
    transform: translateY(-2px);
}
</style>

<div class="container py-5">
    <h2 class="mb-4">Make Payment</h2>

    <p><strong>Service:</strong> {{ service_request.service.name }}</p>
    <p><strong>Amount Due:</strong> â‚¦{{ service_request.amount_due }}</p>

    <hr>

    <!-- Paystack Option -->
    <h3>Pay Online</h3>
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="method" value="paystack">
        <button type="submit" class="btn btn-primary">Pay with Paystack</button>
    </form>

    <hr>

    <!-- Bank Transfer Option -->
    <h3>Bank Transfer</h3>

    {% for bank in bank_details %}
    <div class="mb-3">
        <p>
            <strong>{{ bank.bank_name }}</strong><br>
            {{ bank.account_name }}<br>
            {{ bank.account_number }}
        </p>
    </div>
    {% endfor %}

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="hidden" name="method" value="bank">

    {{ payment_form.proof.label_tag }}
    {{ payment_form.proof|add_class:"form-control" }}

    {% if payment_form.proof.errors %}
    <div class="text-danger mt-1">
        {{ payment_form.proof.errors }}
    </div>
    {% endif %}

    <br>
    <button type="submit" class="btn btn-success">Submit Proof</button>
</form>

</div>

<!-- Floating Home Button -->
<a href="{% url 'home' %}" class="floating-home-btn" title="Back to Home">
  <i class="bi bi-house-door-fill"></i> Home
</a>

{% endblock %}
